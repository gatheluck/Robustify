---
title: 'Ascender: Accelerator of Scientific Development and Research'
date: '2022-07-07'
tags: ['python', 'research', 'cvpaper.challenge']
draft: false
summary: Pythonã‚’ç”¨ã„ãŸç ”ç©¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆAscenderã‚’å…¬é–‹ã—ã¾ã—ãŸ.
---

## TL;DR

- Python ã‚’ç”¨ã„ãŸç ”ç©¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ[Ascender](https://github.com/cvpaperchallenge/Ascender)ã‚’å…¬é–‹.
- ãƒãƒ¼ãƒ ã§ã®ç ”ç©¶ãƒ»é–‹ç™ºãŒæƒ³å®šã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦æœ‰ç”¨ãªæ©Ÿèƒ½ã‚’å®Ÿè£….

## Background

ç§ã®æ‰€å±ã—ã¦ã„ã‚‹ [cvpaper.challnege](http://xpaperchallenge.org/cv/) ã§ã¯ã‚°ãƒ«ãƒ¼ãƒ—ã§ç ”ç©¶æ´»å‹•ã‚’è¡Œã£ã¦ã„ã‚‹ãŸã‚, ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ãŒãã‚Œãã‚Œã®ç’°å¢ƒã§ 1 ã¤ã®ç ”ç©¶ã®ãŸã‚ã®å®Ÿé¨“ã‚³ãƒ¼ãƒ‰ã‚’é–‹ç™ºã™ã‚‹æ©Ÿä¼šãŒé »ç¹ã«ã‚ã‚Šã¾ã™. ã—ã‹ã—, ã“ã‚Œã¾ã§å…±é€šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚„ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãŒå­˜åœ¨ã—ã¦ã„ãªã‹ã£ãŸãŸã‚, ã‚³ãƒ¼ãƒ‰ã®å…±æœ‰ã‚„å†åˆ©ç”¨, ãƒãƒ¼ãƒ ã§ã®åŒæ™‚é–‹ç™ºã¯ä¸Šæ‰‹ãå‡ºæ¥ã¦ã„ãªã„çŠ¶æ³ã§ã—ãŸ. ãã“ã§, [XCCV ã‚°ãƒ«ãƒ¼ãƒ—](http://xpaperchallenge.org/cv/xccv)ã® 2022 å¹´ã®ãƒ¡ã‚¿ã‚µãƒ¼ãƒ™ã‚¤æ´»å‹•ã®ä¸€è²«ã¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸ. æœ¬è¨˜äº‹ã§ã¯ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ©Ÿèƒ½ã¨ä½¿ã„æ–¹ã«ã¤ã„ã¦ç°¡å˜ã«ç´¹ä»‹ã—ã¾ã™.

## What is Ascender

ä¸Šè¨˜ã®ã‚ˆã†ãªèƒŒæ™¯ã§ Python ã‚’ç”¨ã„ãŸç ”ç©¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚ã‚‹ [Ascender](https://github.com/cvpaperchallenge/Ascender) ã‚’ä½œæˆã—ã¾ã—ãŸ. ç‰¹å¾´ã¨ã—ã¦ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç‚¹ãŒã‚ã‚Šã¾ã™.

- **ã‚³ãƒ³ãƒ†ãƒŠä»®æƒ³åŒ–**: Docker ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§é–‹ç™ºç’°å¢ƒä¾å­˜ã‚’æ¸›ã‚‰ã—, ã‚³ãƒ¼ãƒ‰ã®ç§»æ¤æ€§ã‚’å‘ä¸Š.
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**: Poetry ã‚’ä½¿ç”¨ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã‚ˆã‚Š, åŒä¸€ç’°å¢ƒã®å†ç¾æ€§ã‚’å‘ä¸Š.
- **ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«**: Black, Flake8, isort ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«çµ±ä¸€.
- **é™çš„å‹ãƒã‚§ãƒƒã‚¯**: Mypy ã«ã‚ˆã‚‹é™çš„å‹ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚Š, ã‚³ãƒ¼ãƒ‰ã®ä¿¡é ¼æ€§ã‚’å‘ä¸Š.
- **ãƒ†ã‚¹ãƒˆ**: pytest ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç°¡å˜ã«ä½¿ç”¨å¯èƒ½.
- **GitHub é–¢é€£æ©Ÿèƒ½**: Pull request ä½œæˆæ™‚ã® workflow ã‚„ issue ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç­‰ã‚’å®Ÿè£…æ¸ˆ.

Python ã‚’ç”¨ã„ãŸ ML å‘¨ã‚Šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ã¯, [Cookiecutter Data Science](https://github.com/drivendata/cookiecutter-data-science) ã‚„ [Lightning-Hydra-Template](https://github.com/ashleve/lightning-hydra-template) ãªã©æ—¢ã«åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒ, ä»Šå›ã¯ç‰¹ã«ãƒãƒ¼ãƒ ã§ã®åŒæ™‚é–‹ç™ºã‚’ä¸»è»¸ã¨ã—, é–‹ç™ºã®éš›ã«ç‰¹å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ¶ç´„ã‚’å‡ºæ¥ã‚‹ã ã‘å—ã‘ãªã„ã‚ˆã†ã«ã—ã¾ã—ãŸ.

## Prerequisites

Ascender ã§ã¯é–‹ç™ºç’°å¢ƒã«ã‚ˆã‚‹å½±éŸ¿ã‚’æ¥µåŠ›å°ã•ãã™ã‚‹ãŸã‚ã«, Docker ã‚³ãƒ³ãƒ†ãƒŠå†…ã§é–‹ç™ºã‚’ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™. ãã®ãŸã‚, Ascender ã§é–‹ç™ºã‚’å§‹ã‚ã‚‹æº–å‚™ã¨ã—ã¦ [Docker](), [Docker Compose](), [NVIDIA Container Toolkit (nvidia-docker2)]() ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™. éæ¨å¥¨ã§ã™ãŒ Docker ã‚’ä½¿ç”¨ã—ãªãã¦ã‚‚ Ascender ã§é–‹ç™ºã‚’è¡Œã†ã“ã¨ã¯å¯èƒ½ã§ã™.ãã®ãŸã‚, æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®æ–¹ã‚„ Docker ã‚’ä½¿ç”¨ã—ãªã„æ–¹ã¯, ã“ã®ç« ã¯

```shell
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin
```

## Start development

ã¾ãš, Ascender ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æ–°ã—ã„ Github ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—, ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™. [ã“ã¡ã‚‰ã®ãƒªãƒ³ã‚¯](https://github.com/cvpaperchallenge/Ascender/generate)ã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆãƒšãƒ¼ã‚¸ã«é·ç§»ã§ãã¾ã™.

```shell
% git clone git@github.com:<YOUR_USER_NAME>/<YOUR_REPO_NAME>.git
% cd <YOUR_REPO_NAME>
```

Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—, ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™. GPU ç’°å¢ƒã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ [environments/gpu](https://github.com/cvpaperchallenge/Ascender/blob/develop/environments/gpu/docker-compose.yaml), CPU ã®ã¿ã®ç’°å¢ƒã®å ´åˆã¯ [environments/cpu](https://github.com/cvpaperchallenge/Ascender/blob/develop/environments/cpu/docker-compose.yaml) ã® `docker-compose.yaml` ã‚’ä½¿ç”¨ã—ã¦ä¸‹ã•ã„.

```shell
% cd environments/gpu  # CPU ã®ã¿ã®ç’°å¢ƒã®å ´åˆã¯ `cd environments/cpu`
% sudo docker compose up -d
```

`sudo docker compose exec core bash` ã§ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã‚Š, Poetry ã‚’ä½¿ç”¨ã—ã¦ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆ, ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™. `poetry install` ã‚’å®Ÿè¡Œã™ã‚‹ã®ã¯åˆå›ã®ã¿ã§å¤§ä¸ˆå¤«ã§ã™.

```shell
% sudo docker compose exec core bash
$ poetry install
```

ã“ã‚Œã§é–‹ç™ºæº–å‚™å®Œäº†ã§ã™. `sudo docker compose up -d` ã«ã‚ˆã£ã¦ã‚³ãƒ³ãƒ†ãƒŠå†…ã® `/home/challenger/ascender` ã«[ãƒ›ã‚¹ãƒˆ PC ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒãƒœãƒªãƒ¥ãƒ¼ãƒ ã•ã‚Œã¦ã„ã‚‹](https://github.com/cvpaperchallenge/Ascender/blob/master/environments/gpu/docker-compose.yaml#L18)ã®ã§, ãƒ›ã‚¹ãƒˆ PC ã§ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã¨ã‚³ãƒ³ãƒ†ãƒŠå†…ã«åæ˜ ã•ã‚Œã¾ã™. é€†ã‚‚ã¾ãŸç„¶ã‚Šã§ã™.

## During development

### Poetry

Ascender ã§ã¯ Poetry ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç®¡ç†ã‚’è¡Œãªã£ã¦ã„ã¾ã™.
Poetry ã‚’ä½¿ç”¨ã—ãŸã“ã¨ãŒãªã„æ–¹ã¯[ã“ã¡ã‚‰ã®è³‡æ–™](https://cvpaperchallenge.github.io/Britannica/poetry101/ja)ã‚„[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://python-poetry.org/docs/)ã‚’åˆã‚ã›ã¦å‚ç…§ã—ã¦ä¸‹ã•ã„.

```shell
# Poetry ã‚’ç”¨ã„ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
$ poetry add <LIBARY_NAME>
# Poetry ãŒä½œæˆã—ãŸä»®æƒ³ç’°å¢ƒã‚’ä½¿ç”¨ã—ã¦ python3 ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚·ã‚§ãƒ«ã‚’èµ·å‹•
$ poetry run python3
```

### Black, Flake8, isort

Ascender ã§ã¯ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±ä¸€ã™ã‚‹ãŸã‚ã« Black, Flake8, isort ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™. [Makefile](https://github.com/cvpaperchallenge/Ascender/blob/master/Makefile) ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ä¸€åº¦ã«é©ç”¨å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™.ã€€(ã‚³ãƒãƒ³ãƒ‰åã¯ [pysen](https://github.com/pfnet/pysen) ã®ã‚‚ã®ã«å¯„ã›ã¦ã„ã¾ã™.)

```shell
# Black ã¨ isort ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
$ make format
# Black, Flake8, isort ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¢ºèª (ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã¯è¡Œã‚ãªã„)
$ make lint
```

### Mypy

### pytest

## Stop development

é–‹ç™ºãŒçµ‚äº†ã—ãŸã‚‰å¿…è¦ã«å¿œã˜ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ã—ã¦ä¸‹ã•ã„.

```bash
% cd environments/gpu  # CPU ã®ã¿ã®ç’°å¢ƒã®å ´åˆã¯ `cd environments/cpu`
% sudo dokcer compose stop
```

ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã—ãŸã„å ´åˆã¯ä»£ã‚ã‚Šã« `sudo dokcer compose down` ã‚’ä½¿ç”¨ã—ã¦ä¸‹ã•ã„.

## Inline Highlighting

Sample of inline highlighting `sum = parseInt(num1) + parseInt(num2)`

## Code Blocks

Some Javascript code

```javascript
var num1, num2, sum
num1 = prompt('Enter first number')
num2 = prompt('Enter second number')
sum = parseInt(num1) + parseInt(num2) // "+" means "add"
alert('Sum = ' + sum) // "+" means combine into a string
```

Some Python code ğŸ

```python
def fib():
    a, b = 0, 1
    while True:            # First iteration:
        yield a            # yield 0 to start with and then
        a, b = b, a + b    # a will now be 1, and b will also be 1, (0 + 1)

for index, fibonacci_number in zip(range(10), fib()):
     print('{i:3}: {f:3}'.format(i=index, f=fibonacci_number))
```
